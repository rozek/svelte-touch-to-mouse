{"version":3,"file":"svelte-touch-to-mouse.esm.js","sources":["../src/svelte-touch-to-mouse.ts"],"sourcesContent":["//----------------------------------------------------------------------------//\n//                           Svelte Touch-to-Mouse                            //\n//----------------------------------------------------------------------------//\n\n// see https://stackoverflow.com/questions/1517924/javascript-mapping-touch-events-to-mouse-events\n// and https://stackoverflow.com/questions/5885808/includes-touch-events-clientx-y-scrolling-or-not\n\n// Important!\n// for all elements affected by \"mapTouchToMouseFor\" (i.e., for all elements\n// selected by \"Selector\"), don't forget to set the following style properties\n//\n// -webkit-touch-callout:none;\n// -ms-touch-action: none; touch-action: none;\n//\n// either in a stylesheet or inline\n\n  function mapTouchToMouseFor (Selector:string):void {\n    function TouchEventMapper (originalEvent:TouchEvent):void {\n      let Target = originalEvent.target as Element\n      if (! Target.matches(Selector)) { return }\n\n      let simulatedEventType\n      switch (originalEvent.type) {\n        case 'touchstart':  simulatedEventType = 'mousedown'; break\n        case 'touchmove':   simulatedEventType = 'mousemove'; break\n        case 'touchend':    simulatedEventType = 'mouseup';   break\n        case 'touchcancel': simulatedEventType = 'mouseup';   break\n        default:            return\n      }\n\n      let firstTouch = originalEvent.changedTouches[0]\n\n      let clientX = firstTouch.clientX, pageX = firstTouch.pageX, PageXOffset = window.pageXOffset\n      let clientY = firstTouch.clientY, pageY = firstTouch.pageY, PageYOffset = window.pageYOffset\n      if (\n        (pageX === 0) && (Math.floor(clientX) > Math.floor(pageX)) ||\n        (pageY === 0) && (Math.floor(clientY) > Math.floor(pageY))\n      ) {\n        clientX -= PageXOffset\n        clientY -= PageYOffset\n      } else if (\n        (clientX < pageX - PageXOffset) || (clientY < pageY - PageYOffset)\n      ) {\n        clientX = pageX - PageXOffset\n        clientY = pageY - PageYOffset\n      }\n\n      let simulatedEvent = new MouseEvent(simulatedEventType, {\n        bubbles:true, cancelable:true,\n        screenX:firstTouch.screenX, screenY:firstTouch.screenY,\n// @ts-ignore we definitely want \"pageX\" and \"pageY\"\n        clientX, clientY, pageX, pageY, buttons:1, button:0,\n        ctrlKey:originalEvent.ctrlKey, shiftKey:originalEvent.shiftKey,\n        altKey:originalEvent.altKey, metaKey:originalEvent.metaKey\n      })\n\n      firstTouch.target.dispatchEvent(simulatedEvent)\n//    originalEvent.preventDefault()\n    }\n\n    document.addEventListener('touchstart',  TouchEventMapper, true)\n    document.addEventListener('touchmove',   TouchEventMapper, true)\n    document.addEventListener('touchend',    TouchEventMapper, true)\n    document.addEventListener('touchcancel', TouchEventMapper, true)\n  }\n\n  export default mapTouchToMouseFor\n"],"names":[],"mappings":"AAAA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEE,SAAS,kBAAkB,CAAE,QAAe;IAC1C,SAAS,gBAAgB,CAAE,aAAwB;QACjD,IAAI,MAAM,GAAG,aAAa,CAAC,MAAiB,CAAA;QAC5C,IAAI,CAAE,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;YAAE,OAAM;SAAE;QAE1C,IAAI,kBAAkB,CAAA;QACtB,QAAQ,aAAa,CAAC,IAAI;YACxB,KAAK,YAAY;gBAAG,kBAAkB,GAAG,WAAW,CAAC;gBAAC,MAAK;YAC3D,KAAK,WAAW;gBAAI,kBAAkB,GAAG,WAAW,CAAC;gBAAC,MAAK;YAC3D,KAAK,UAAU;gBAAK,kBAAkB,GAAG,SAAS,CAAC;gBAAG,MAAK;YAC3D,KAAK,aAAa;gBAAE,kBAAkB,GAAG,SAAS,CAAC;gBAAG,MAAK;YAC3D,SAAoB,OAAM;SAC3B;QAED,IAAI,UAAU,GAAG,aAAa,CAAC,cAAc,CAAC,CAAC,CAAC,CAAA;QAEhD,IAAI,OAAO,GAAG,UAAU,CAAC,OAAO,EAAE,KAAK,GAAG,UAAU,CAAC,KAAK,EAAE,WAAW,GAAG,MAAM,CAAC,WAAW,CAAA;QAC5F,IAAI,OAAO,GAAG,UAAU,CAAC,OAAO,EAAE,KAAK,GAAG,UAAU,CAAC,KAAK,EAAE,WAAW,GAAG,MAAM,CAAC,WAAW,CAAA;QAC5F,IACE,CAAC,KAAK,KAAK,CAAC,MAAM,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YAC1D,CAAC,KAAK,KAAK,CAAC,MAAM,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,EAC1D;YACA,OAAO,IAAI,WAAW,CAAA;YACtB,OAAO,IAAI,WAAW,CAAA;SACvB;aAAM,IACL,CAAC,OAAO,GAAG,KAAK,GAAG,WAAW,MAAM,OAAO,GAAG,KAAK,GAAG,WAAW,CAAC,EAClE;YACA,OAAO,GAAG,KAAK,GAAG,WAAW,CAAA;YAC7B,OAAO,GAAG,KAAK,GAAG,WAAW,CAAA;SAC9B;QAED,IAAI,cAAc,GAAG,IAAI,UAAU,CAAC,kBAAkB,EAAE;YACtD,OAAO,EAAC,IAAI,EAAE,UAAU,EAAC,IAAI;YAC7B,OAAO,EAAC,UAAU,CAAC,OAAO,EAAE,OAAO,EAAC,UAAU,CAAC,OAAO;;YAEtD,OAAO,SAAA,EAAE,OAAO,SAAA,EAAE,KAAK,OAAA,EAAE,KAAK,OAAA,EAAE,OAAO,EAAC,CAAC,EAAE,MAAM,EAAC,CAAC;YACnD,OAAO,EAAC,aAAa,CAAC,OAAO,EAAE,QAAQ,EAAC,aAAa,CAAC,QAAQ;YAC9D,MAAM,EAAC,aAAa,CAAC,MAAM,EAAE,OAAO,EAAC,aAAa,CAAC,OAAO;SAC3D,CAAC,CAAA;QAEF,UAAU,CAAC,MAAM,CAAC,aAAa,CAAC,cAAc,CAAC,CAAA;;KAEhD;IAED,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAG,gBAAgB,EAAE,IAAI,CAAC,CAAA;IAChE,QAAQ,CAAC,gBAAgB,CAAC,WAAW,EAAI,gBAAgB,EAAE,IAAI,CAAC,CAAA;IAChE,QAAQ,CAAC,gBAAgB,CAAC,UAAU,EAAK,gBAAgB,EAAE,IAAI,CAAC,CAAA;IAChE,QAAQ,CAAC,gBAAgB,CAAC,aAAa,EAAE,gBAAgB,EAAE,IAAI,CAAC,CAAA;AAClE;;;;"}